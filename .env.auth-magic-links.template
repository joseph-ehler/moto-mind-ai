# ===========================================
# üîê Magic Link Authentication Configuration
# ===========================================
# Add these to your .env.local file

# ---------------------
# Email (Resend) - REQUIRED for email magic links
# ---------------------
# Get your API key from: https://resend.com/api-keys
# Free tier: 100 emails/day, 3,000/month
RESEND_API_KEY=re_xxxxxxxxxxxx

# Email "from" address (must be verified domain)
# Development: Use resend.dev domain (works immediately)
# Production: Use your custom domain (requires DNS verification)
RESEND_FROM_EMAIL=auth@resend.dev
# or
# RESEND_FROM_EMAIL=noreply@yourdomain.com

# ---------------------
# SMS (Twilio) - REQUIRED for phone magic links
# ---------------------
# Get credentials from: https://console.twilio.com
# Free trial: $15.50 credit (approx 500-1000 SMS)
# Production: ~$0.01 per SMS (varies by country)

# Account SID (starts with AC...)
TWILIO_ACCOUNT_SID=ACxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# Auth Token (from console dashboard)
TWILIO_AUTH_TOKEN=xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# Twilio phone number (format: +1234567890)
# Must be purchased/verified in Twilio console
TWILIO_PHONE_NUMBER=+1234567890

# ---------------------
# Optional: Magic Link Configuration
# ---------------------

# Token expiration (minutes)
MAGIC_LINK_EXPIRY_MINUTES=15

# Rate limits (defaults shown, can be overridden in code)
# Email: 10/hour (cheap, users may typo)
# SMS: 5/hour (costs money, but needs flexibility)
# MAGIC_LINK_RATE_LIMIT=3    # Deprecated: Use code-level limits
# MAGIC_LINK_RATE_WINDOW=60  # Deprecated: Use code-level limits

# ===========================================
# üìù Setup Instructions
# ===========================================

# 1. RESEND SETUP (Email)
#    a. Go to https://resend.com
#    b. Sign up (free)
#    c. Get API key from dashboard
#    d. For production, verify your domain

# 2. TWILIO SETUP (SMS)
#    a. Go to https://www.twilio.com
#    b. Sign up (free trial gives $15.50 credit)
#    c. Get Account SID and Auth Token
#    d. Purchase a phone number (~$1/month)
#    e. For production, verify your business (required for scale)

# 3. ADD TO .env.local
#    Copy the variables above and add your real values

# 4. RUN MIGRATION
#    npm run db:migrate

# 5. TEST
#    npm run dev
#    Go to http://localhost:3005/login
#    Try email or phone magic link!

# ===========================================
# üí∞ Cost Estimates
# ===========================================
# Development (testing):
#   - Resend: FREE (100/day limit)
#   - Twilio: FREE trial ($15.50 credit)
#   Total: $0

# Production (1000 auth/month):
#   - Resend: FREE (3,000/month limit)
#   - Twilio: ~$10/month (1000 SMS √ó $0.01)
#   - Phone number: $1/month
#   Total: ~$11/month

# Production (10,000 auth/month):
#   - Resend: $20/month (unlimited)
#   - Twilio: ~$100/month (10,000 SMS √ó $0.01)
#   - Phone number: $1/month
#   Total: ~$121/month

# ===========================================
# üîê Security Notes
# ===========================================
# - NEVER commit .env.local to git
# - Use different keys for dev/staging/prod
# - Rotate keys regularly
# - Monitor usage for suspicious activity
# - Enable 2FA on Resend/Twilio accounts
